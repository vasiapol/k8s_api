apiVersion: autoscaling/v2beta1
kind: HorizontalPodAutoscaler
metadata:
    name: hpa-autoscaler
spec:
    scaleTargetRef:
        apiVersion: extensions/v1beta1
        kind: Deployment
        name: api
    minReplicas: 1
    maxReplicas: 10
metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        kind: AverageUtilization
        averageUtilization: 50
  - type: Pods
    pods:
      metric:
        name: packets-per-second
      targetAverageValue: 100
